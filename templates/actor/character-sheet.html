<form class="{{cssClass}}" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
    <div class="header-fields">
      <h1 class="charname">
        <input name="name" type="text" value="{{actor.name}}" placeholder="Ім'я персонажа"/>
      </h1>
    </div>
  </header>

  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="main">{{localize "DYKEPOLE.Main"}}</a>
    <a class="item" data-tab="skills">{{localize "DYKEPOLE.Skills"}}</a>
    <a class="item" data-tab="items">{{localize "DYKEPOLE.Items"}}</a>
  </nav>

  <section class="sheet-body">
    <div class="tab" data-group="primary" data-tab="main">
      <!-- Навички -->
      <div class="skills-section">
        <h2>{{localize "DYKEPOLE.Skills"}}</h2>
        <div class="skills-grid">
          {{#each system.skills as |skill key|}}
          <div class="skill">
            <label>{{localize (concat "DYKEPOLE.Skill" (titleCase key))}}</label>
            <input type="number" name="system.skills.{{key}}" value="{{skill}}" min="0" max="4"/>
            <button type="button" class="rollable" data-skill="{{key}}">{{localize "DYKEPOLE.Roll"}}</button>
          </div>
          {{/each}}
        </div>
      </div>

      <!-- Знання -->
      <div class="knowledge-section">
        <h2>{{localize "DYKEPOLE.Knowledge"}}</h2>
        <div class="knowledge-grid">
          {{#each system.knowledge as |knowledge key|}}
          <div class="knowledge">
            <label>{{localize (concat "DYKEPOLE." (titleCase key))}}</label>
            <input type="number" name="system.knowledge.{{key}}" value="{{knowledge}}" min="0" max="3"/>
          </div>
          {{/each}}
        </div>
      </div>

      <!-- Лічильники -->
      <div class="counters-section">
        <h2>{{localize "DYKEPOLE.Counters"}}</h2>
        {{#each system.counters as |counter key|}}
        <div class="counter">
          <h3>{{localize (concat "DYKEPOLE." (titleCase key))}}</h3>
          <div class="counter-fields">
            <label>{{localize "DYKEPOLE.Level"}}:</label>
            <input type="number" name="system.counters.{{key}}.level" value="{{counter.level}}" min="0"/>
            <label>{{localize "DYKEPOLE.Track"}}:</label>
            <input type="number" name="system.counters.{{key}}.track" value="{{counter.track}}" min="0" max="{{counter.track_max}}"/>
            / {{counter.track_max}}
          </div>
        </div>
        {{/each}}
      </div>

      <!-- Прагнення -->
      <div class="aspirations-section">
        <h2>{{localize "DYKEPOLE.Aspirations"}}</h2>
        <div class="aspirations-list">
          {{#if system.aspirations}}
            <textarea name="system.aspirations">{{#if (eq (typeof system.aspirations) "string")}}{{system.aspirations}}{{else}}{{join system.aspirations "\n"}}{{/if}}</textarea>
          {{else}}
            <textarea name="system.aspirations" placeholder="Прагнення персонажа..."></textarea>
          {{/if}}
        </div>
      </div>
    </div>

    <div class="tab" data-group="primary" data-tab="skills">
      <div class="skills-section">
        <h2>{{localize "DYKEPOLE.Skills"}}</h2>
        <div class="skills-grid">
          {{#each system.skills as |skill key|}}
          <div class="skill">
            <label>{{localize (concat "DYKEPOLE.Skill" (titleCase key))}}</label>
            <input type="number" name="system.skills.{{key}}" value="{{skill}}" min="0" max="4"/>
            <button type="button" class="rollable" data-skill="{{key}}">{{localize "DYKEPOLE.Roll"}}</button>
          </div>
          {{/each}}
        </div>
      </div>
    </div>

    <div class="tab" data-group="primary" data-tab="items">
      <div class="items-grid">
        <!-- Аспекти -->
        <div class="item-category">
          <h3>{{localize "DYKEPOLE.Aspects"}} ({{aspects.length}}/{{system.temp_aspects_max}})</h3>
          <a class="item-create" data-type="aspect" title="Створити аспект">
            <i class="fas fa-plus"></i> {{localize "DYKEPOLE.Add"}}
          </a>
          <ul class="items-list">
            {{#each aspects as |item id|}}
            <li class="item" data-item-id="{{item.id}}">
              <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
              <h4 class="item-name">{{item.name}}</h4>
              <span class="item-type">{{item.system.track.value}}/{{item.system.track.max}}</span>
              <div class="item-controls">
                <a class="item-control item-edit" title="{{localize 'DYKEPOLE.Edit'}}">
                  <i class="fas fa-edit"></i>
                </a>
                <a class="item-control item-delete" title="{{localize 'DYKEPOLE.Delete'}}">
                  <i class="fas fa-trash"></i>
                </a>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>

        <!-- Спорядження -->
        <div class="item-category">
          <h3>{{localize "DYKEPOLE.Equipment"}} ({{equipment.length}}/{{system.equipment_max}})</h3>
          <a class="item-create" data-type="equipment" title="Створити спорядження">
            <i class="fas fa-plus"></i> {{localize "DYKEPOLE.Add"}}
          </a>
          <ul class="items-list">
            {{#each equipment as |item id|}}
            <li class="item" data-item-id="{{item.id}}">
              <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
              <h4 class="item-name">{{item.name}}</h4>
              <div class="item-controls">
                <a class="item-control item-edit" title="{{localize 'DYKEPOLE.Edit'}}">
                  <i class="fas fa-edit"></i>
                </a>
                <a class="item-control item-delete" title="{{localize 'DYKEPOLE.Delete'}}">
                  <i class="fas fa-trash"></i>
                </a>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>

        <!-- Осколки -->
        <div class="item-category">
          <h3>{{localize "DYKEPOLE.Shards"}} ({{shards.length}}/{{system.shards_max}})</h3>
          <a class="item-create" data-type="shard" title="Створити осколок">
            <i class="fas fa-plus"></i> {{localize "DYKEPOLE.Add"}}
          </a>
          <ul class="items-list">
            {{#each shards as |item id|}}
            <li class="item" data-item-id="{{item.id}}">
              <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
              <h4 class="item-name">{{item.name}}</h4>
              <span class="item-type">{{item.system.type}}</span>
              <div class="item-controls">
                <a class="item-control item-edit" title="{{localize 'DYKEPOLE.Edit'}}">
                  <i class="fas fa-edit"></i>
                </a>
                <a class="item-control item-delete" title="{{localize 'DYKEPOLE.Delete'}}">
                  <i class="fas fa-trash"></i>
                </a>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>

        <!-- Карти -->
        <div class="item-category">
          <h3>{{localize "DYKEPOLE.Maps"}} ({{maps.length}}/{{system.maps_max}})</h3>
          <a class="item-create" data-type="map" title="Створити карту">
            <i class="fas fa-plus"></i> {{localize "DYKEPOLE.Add"}}
          </a>
          <ul class="items-list">
            {{#each maps as |item id|}}
            <li class="item" data-item-id="{{item.id}}">
              <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
              <h4 class="item-name">{{item.name}}</h4>
              <div class="item-controls">
                <a class="item-control item-edit" title="{{localize 'DYKEPOLE.Edit'}}">
                  <i class="fas fa-edit"></i>
                </a>
                <a class="item-control item-delete" title="{{localize 'DYKEPOLE.Delete'}}">
                  <i class="fas fa-trash"></i>
                </a>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>

        <!-- Поранення -->
        <div class="item-category">
          <h3>{{localize "DYKEPOLE.Injuries"}}</h3>
          <a class="item-create" data-type="injury" title="Створити поранення">
            <i class="fas fa-plus"></i> {{localize "DYKEPOLE.Add"}}
          </a>
          <ul class="items-list">
            {{#each injuries as |item id|}}
            <li class="item" data-item-id="{{item.id}}">
              <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
              <h4 class="item-name">{{item.name}}</h4>
              <span class="item-type">{{item.system.track.value}}/{{item.system.track.max}}</span>
              <div class="item-controls">
                <a class="item-control item-edit" title="{{localize 'DYKEPOLE.Edit'}}">
                  <i class="fas fa-edit"></i>
                </a>
                <a class="item-control item-delete" title="{{localize 'DYKEPOLE.Delete'}}">
                  <i class="fas fa-trash"></i>
                </a>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>

        <!-- Бонуси -->
        <div class="item-category">
          <h3>{{localize "DYKEPOLE.Bonuses"}}</h3>
          <a class="item-create" data-type="bonus" title="Створити бонус">
            <i class="fas fa-plus"></i> {{localize "DYKEPOLE.Add"}}
          </a>
          <ul class="items-list">
            {{#each bonuses as |item id|}}
            <li class="item" data-item-id="{{item.id}}">
              <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
              <h4 class="item-name">{{item.name}}</h4>
              <span class="item-type">{{item.system.track.value}}/{{item.system.track.max}}</span>
              <div class="item-controls">
                <a class="item-control item-edit" title="{{localize 'DYKEPOLE.Edit'}}">
                  <i class="fas fa-edit"></i>
                </a>
                <a class="item-control item-delete" title="{{localize 'DYKEPOLE.Delete'}}">
                  <i class="fas fa-trash"></i>
                </a>
              </div>
            </li>
            {{/each}}
          </ul>
        </div>
      </div>
    </div>
  </section>
</form>